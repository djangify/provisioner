{% extends "portal/base.html" %}
{% block title %}Change Password | My Djangify{% endblock %}

{% block content %}
<h1 class="text-2xl font-semibold mb-6">Change password</h1>

<form id="pw" class="max-w-md space-y-4">
  <input type="password" name="new_password" placeholder="New password"
         class="w-full border px-3 py-2 rounded">
  <input type="password" name="confirm_password" placeholder="Confirm password"
         class="w-full border px-3 py-2 rounded">

  <button class="bg-slate-900 text-white px-4 py-2 rounded">
    Update password
  </button>
</form>

<script>
document.getElementById("pw").onsubmit = e => {
  e.preventDefault();
  fetch("{% url 'portal:api-password' %}", {
    method: "POST",
    body: new FormData(e.target)
  })
  .then(r => r.json())
  .then(d => alert(d.success ? "Updated" : d.error));
};
</script>
{% endblock %}
